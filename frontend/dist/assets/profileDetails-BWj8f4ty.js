import{c as M,r as n,j as e,a as j,b as ce,u as de,v as ue,B as z,d as V,S as me,m as B,A as pe,e as xe,C as Z,f as X,g as ge,h as he,M as fe,i as Y,R as I,k as be,l as ve,n as Ne,o as ye,p as O,I as je,q as we}from"./index-MpQ-mYGa.js";import{A as ke,Z as Ce}from"./zap-CnLu32hm.js";const Pe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Se=M("book-open",Pe);const Ie=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],G=M("camera",Ie);const _e=[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1waht3"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"11",r:"3",key:"itu57m"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]],Me=M("contact",_e);const Ee=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Re=M("file-check",Ee),J=n.forwardRef(({className:a,...s},t)=>e.jsx("textarea",{className:j("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s}));J.displayName="Textarea";function Ae(a,s=[]){let t=[];function o(c,d){const l=n.createContext(d);l.displayName=c+"Context";const u=t.length;t=[...t,d];const g=h=>{const{scope:v,children:f,...b}=h,w=v?.[a]?.[u]||l,S=n.useMemo(()=>b,Object.values(b));return e.jsx(w.Provider,{value:S,children:f})};g.displayName=c+"Provider";function k(h,v){const f=v?.[a]?.[u]||l,b=n.useContext(f);if(b)return b;if(d!==void 0)return d;throw new Error(`\`${h}\` must be used within \`${c}\``)}return[g,k]}const i=()=>{const c=t.map(d=>n.createContext(d));return function(l){const u=l?.[a]||c;return n.useMemo(()=>({[`__scope${a}`]:{...l,[a]:u}}),[l,u])}};return i.scopeName=a,[o,$e(i,...s)]}function $e(...a){const s=a[0];if(a.length===1)return s;const t=()=>{const o=a.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(c){const d=o.reduce((l,{useScope:u,scopeName:g})=>{const h=u(c)[`__scope${g}`];return{...l,...h}},{});return n.useMemo(()=>({[`__scope${s.scopeName}`]:d}),[d])}};return t.scopeName=s.scopeName,t}var ze=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Q=ze.reduce((a,s)=>{const t=ce(`Primitive.${s}`),o=n.forwardRef((i,c)=>{const{asChild:d,...l}=i,u=d?t:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...l,ref:c})});return o.displayName=`Primitive.${s}`,{...a,[s]:o}},{}),D="Progress",F=100,[Le]=Ae(D),[De,Fe]=Le(D),W=n.forwardRef((a,s)=>{const{__scopeProgress:t,value:o=null,max:i,getValueLabel:c=Te,...d}=a;(i||i===0)&&!H(i)&&console.error(Ue(`${i}`,"Progress"));const l=H(i)?i:F;o!==null&&!q(o,l)&&console.error(Ve(`${o}`,"Progress"));const u=q(o,l)?o:null,g=_(u)?c(u,l):void 0;return e.jsx(De,{scope:t,value:u,max:l,children:e.jsx(Q.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":_(u)?u:void 0,"aria-valuetext":g,role:"progressbar","data-state":ae(u,l),"data-value":u??void 0,"data-max":l,...d,ref:s})})});W.displayName=D;var ee="ProgressIndicator",se=n.forwardRef((a,s)=>{const{__scopeProgress:t,...o}=a,i=Fe(ee,t);return e.jsx(Q.div,{"data-state":ae(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...o,ref:s})});se.displayName=ee;function Te(a,s){return`${Math.round(a/s*100)}%`}function ae(a,s){return a==null?"indeterminate":a===s?"complete":"loading"}function _(a){return typeof a=="number"}function H(a){return _(a)&&!isNaN(a)&&a>0}function q(a,s){return _(a)&&!isNaN(a)&&a<=s&&a>=0}function Ue(a,s){return`Invalid prop \`max\` of value \`${a}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${F}\`.`}function Ve(a,s){return`Invalid prop \`value\` of value \`${a}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${F} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var te=W,Be=se;const L=n.forwardRef(({className:a,value:s,...t},o)=>e.jsx(te,{ref:o,className:j("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...t,children:e.jsx(Be,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));L.displayName=te.displayName;const Oe="https://glacial-samiyah-presutural.ngrok-free.dev",qe=()=>{const a=de(),[s,t]=n.useState({idNumber:"",firstName:"",middleInitial:"",lastName:"",course:"",address:"",guardianName:"",guardianContact:"",id_picture:null,signature_picture:null}),[o,i]=n.useState(!1),[c,d]=n.useState("idle"),[l,u]=n.useState(""),[g,k]=n.useState(!1),[h,v]=n.useState({id:0,sig:0}),[f,b]=n.useState(!1),[w,S]=n.useState(!1),[N,T]=n.useState(""),E=!s.idNumber||!s.firstName||!s.lastName||!s.id_picture||!s.signature_picture,re=r=>{v(m=>({...m,[r]:0}));const p=setInterval(()=>{v(m=>{const x=m[r];return x>=92?(clearInterval(p),m):{...m,[r]:x+(x<70?15:2)}})},200);return p},U=async(r,p)=>{const m=r.target.files?.[0];if(!m)return;const x=p==="id_picture"?"id":"sig";p==="id_picture"?b(!0):S(!0);const ne=re(x);try{const A=await new Promise(P=>{const $=new FileReader;$.onload=()=>P($.result),$.readAsDataURL(m)}),oe=await we.post(`${Oe}/process_and_return`,{photo:A,type:p},{responseType:"blob",timeout:6e4}),le=new File([oe.data],`processed_${x}.webp`,{type:"image/webp"});t(P=>({...P,[p]:le})),v(P=>({...P,[x]:100}))}catch(A){console.warn("AI Enhancement skipped/failed, using raw file:",A)}finally{clearInterval(ne),setTimeout(()=>{b(!1),S(!1)},500)}},R=n.useMemo(()=>s.id_picture?URL.createObjectURL(s.id_picture):"",[s.id_picture]),C=n.useMemo(()=>s.signature_picture?URL.createObjectURL(s.signature_picture):"",[s.signature_picture]);n.useEffect(()=>()=>{R&&URL.revokeObjectURL(R),C&&URL.revokeObjectURL(C)},[R,C]);const ie=async r=>{if(r.preventDefault(),!E){k(!0);try{await Ne();const p=new FormData;Object.entries(s).forEach(([m,x])=>{x!==null&&p.append(m,x)}),await ye.post("/students",p,{headers:{"Content-Type":"multipart/form-data"}}),T("success"),window.scrollTo({top:0,behavior:"smooth"})}catch{T("error")}finally{k(!1)}}};return n.useEffect(()=>{if(s.idNumber.length>=8){const r=setTimeout(async()=>{i(!0);try{const p=await ue(s.idNumber);if(p.valid){d("valid");const m=p.data;t(x=>({...x,firstName:m.firstName||"",middleInitial:m.middleName?m.middleName.charAt(0).toUpperCase():"",lastName:m.lastName||"",course:m.course||x.course}))}}catch{d("invalid"),u("ID Not Found")}finally{i(!1)}},800);return()=>clearTimeout(r)}},[s.idNumber]),e.jsxs("div",{className:"min-h-screen bg-zinc-50 dark:bg-zinc-950 font-sans pb-32",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white dark:bg-zinc-950 border-b border-border px-6 py-4",children:e.jsxs("div",{className:"max-w-[1400px] mx-auto flex items-center justify-between",children:[e.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>a("/"),className:"gap-2 text-muted-foreground hover:text-foreground font-bold group",children:[e.jsx(ke,{className:"h-4 w-4 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"hidden sm:inline uppercase tracking-widest text-[10px]",children:"Back to Portal"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs(V,{variant:"outline",className:"border-primary/20 text-primary px-3 py-0 flex gap-2 items-center mb-1",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary animate-pulse"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Enrollment v2.1"})]}),e.jsx("h1",{className:"text-xl font-black text-foreground uppercase tracking-tighter leading-none",children:"Application Form"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-muted-foreground bg-muted/30 px-4 py-2 rounded-xl border border-border",children:[e.jsx(me,{className:"h-4 w-4 text-emerald-500"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"End-to-End Encrypted"})]})})]})}),e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-[1400px] mx-auto mt-12 px-6",children:[e.jsx(pe,{children:(N==="success"||c==="invalid"&&s.idNumber.length>=8)&&e.jsx(B.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"mb-8",children:e.jsx(xe,{variant:N==="success"?"default":"destructive",className:j("border-none shadow-xl",N==="success"?"bg-emerald-500 text-white":"bg-destructive text-destructive-foreground"),children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[N==="success"?e.jsx(Z,{className:"h-5 w-5"}):e.jsx(X,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx(ge,{className:"text-xs font-black uppercase tracking-[0.2em] mb-1",children:N==="success"?"Submission Successful":"Validation Error"}),e.jsx(he,{className:"text-xs font-medium opacity-90",children:N==="success"?"Your application has been logged and is now being queued for processing.":l})]})]}),N==="success"&&e.jsx(z,{size:"sm",onClick:()=>a("/"),className:"bg-white text-emerald-600 hover:bg-zinc-100 font-black text-[10px] uppercase tracking-widest",children:"Complete Process"})]})})})}),e.jsxs("form",{onSubmit:ie,className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[e.jsxs(K,{icon:e.jsx(Se,{className:"text-primary"}),title:"Academic Identity",subtitle:"Primary Credentials",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(y,{label:"School ID Number",placeholder:"Enter 8-digit ID",value:s.idNumber,onChange:r=>t({...s,idNumber:r}),status:c,isLoading:o}),e.jsx(y,{label:"Program / Course",placeholder:"e.g. BS in Information Technology",value:s.course,onChange:r=>t({...s,course:r})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[e.jsx(y,{label:"First Name",value:s.firstName,onChange:r=>t({...s,firstName:r})}),e.jsx(y,{label:"M.I.",value:s.middleInitial,onChange:r=>t({...s,middleInitial:r.toUpperCase()})}),e.jsx(y,{label:"Last Name",value:s.lastName,onChange:r=>t({...s,lastName:r})})]})]}),e.jsx(K,{icon:e.jsx(Me,{className:"text-primary"}),title:"Personal Registry",subtitle:"Locality & Kinship",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{className:"block text-[10px] font-black text-muted-foreground uppercase mb-2 ml-0.5 tracking-widest flex items-center gap-2",children:[e.jsx(fe,{className:"h-3 w-3"})," Permanent Address"]}),e.jsx(J,{placeholder:"House No, Street, Barangay, City/Municipality...",value:s.address,onChange:r=>t({...s,address:r.target.value}),className:"min-h-[100px] border-border bg-muted/30 focus:bg-background transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(y,{label:"Guardian / Next of Kin",value:s.guardianName,onChange:r=>t({...s,guardianName:r})}),e.jsx(y,{label:"Emergency Contact",value:s.guardianContact,onChange:r=>t({...s,guardianContact:r})})]})]})})]}),e.jsx("div",{className:"lg:col-span-4 sticky top-28",children:e.jsxs(Y,{className:"border-none shadow-xl shadow-primary/5 p-6 rounded-[2.5rem] bg-card flex flex-col gap-8",children:[e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx(V,{variant:"secondary",className:"text-[9px] font-black uppercase tracking-widest px-3 py-0",children:"Biometric Verification"}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Capture or upload your digital assets"})]}),e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsxs("div",{className:"relative mx-auto w-44 h-44",children:[e.jsxs("div",{className:j("w-full h-full rounded-3xl border-2 border-dashed flex flex-col items-center justify-center overflow-hidden transition-all duration-300 relative group",f?"border-primary bg-primary/5":"border-border bg-muted/30 hover:bg-muted/50 hover:border-primary/50"),children:[f?e.jsxs("div",{className:"flex flex-col items-center gap-2 animate-in fade-in zoom-in duration-300",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(I,{className:"h-10 w-10 animate-spin text-primary"}),e.jsxs("span",{className:"absolute text-[10px] font-black text-primary",children:[h.id,"%"]})]}),e.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:"AI Enhancing"})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx(G,{size:32,className:"opacity-20"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"2x2 Portrait"})]}),!f&&e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center pointer-events-none",children:e.jsx(be,{className:"text-white h-8 w-8 animate-bounce"})})]}),e.jsx("input",{type:"file",id:"id-p",hidden:!0,onChange:r=>U(r,"id_picture"),disabled:f}),e.jsx("label",{htmlFor:"id-p",className:"absolute -bottom-2 -right-2 bg-primary text-primary-foreground p-3 rounded-2xl cursor-pointer shadow-xl hover:scale-110 active:scale-95 transition-all",children:e.jsx(G,{size:18})})]}),e.jsx("div",{className:"px-8",children:e.jsx(L,{value:h.id,className:"h-1 bg-muted shrink-0"})}),e.jsx("p",{className:"text-[10px] font-black text-muted-foreground uppercase tracking-widest",children:"Formal ID Photograph"})]}),e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsxs("div",{className:"relative mx-auto w-full h-28 px-4",children:[e.jsx("div",{className:j("w-full h-full rounded-2xl border-2 border-dashed flex flex-col items-center justify-center overflow-hidden transition-all duration-300 relative group",w?"border-primary bg-primary/5":"border-border bg-muted/30 hover:bg-muted/50 hover:border-primary/50"),children:w?e.jsxs("div",{className:"flex items-center gap-3 animate-in slide-in-from-left-4 duration-300",children:[e.jsx(I,{className:"h-5 w-5 animate-spin text-primary"}),e.jsxs("span",{className:"text-xs font-black text-primary",children:[h.sig,"% Processing"]})]}):C?e.jsx("img",{src:C,className:"w-full h-full object-contain p-4 mix-blend-multiply dark:mix-blend-normal"}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx(Re,{size:24,className:"opacity-20"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Digital Signature"})]})}),e.jsx("input",{type:"file",id:"sig-p",hidden:!0,onChange:r=>U(r,"signature_picture"),disabled:w}),e.jsx("label",{htmlFor:"sig-p",className:"absolute -bottom-2 -right-1 bg-foreground text-background dark:bg-zinc-800 dark:text-zinc-100 p-3 rounded-2xl cursor-pointer shadow-xl hover:scale-110 active:scale-95 transition-all",children:e.jsx(ve,{size:18})})]}),e.jsx("div",{className:"px-8",children:e.jsx(L,{value:h.sig,className:"h-1 bg-muted shrink-0"})})]}),e.jsxs(z,{type:"submit",disabled:g||f||w||c!=="valid"||E,className:j("w-full h-16 rounded-[1.5rem] font-black text-xs tracking-[0.2em] transition-all gap-4 shadow-xl",c==="valid"&&!E?"bg-primary text-primary-foreground hover:translate-y-[-2px] shadow-primary/20":"bg-muted text-muted-foreground"),children:[g?e.jsx(I,{className:"h-5 w-5 animate-spin"}):e.jsx(Ce,{className:"h-5 w-5 fill-current"}),g?"TRANSMITTING...":"FINALIZE SUBMISSION"]}),e.jsxs("p",{className:"text-center text-[9px] font-bold text-muted-foreground px-6 py-2 bg-muted/30 rounded-xl leading-relaxed",children:["By submitting, you agree to our ",e.jsx("span",{className:"text-foreground",children:"Privacy Policy"})," regarding official school documentation processing."]})]})})]})]})]})},K=({icon:a,title:s,subtitle:t,children:o})=>e.jsxs(Y,{className:"border-none shadow-xl shadow-primary/5 p-8 rounded-[2.5rem] bg-card overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-[0.03] pointer-events-none",children:O.cloneElement(a,{size:120})}),e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-11 h-11 bg-primary/10 rounded-2xl flex items-center justify-center text-primary border border-primary/20",children:O.cloneElement(a,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-foreground tracking-tight leading-none mb-1",children:s}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-black uppercase tracking-widest leading-none",children:t})]})]}),o]}),y=({label:a,value:s,onChange:t,placeholder:o,status:i="idle",isLoading:c=!1})=>e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-[10px] font-black text-muted-foreground uppercase mb-2 ml-0.5 tracking-widest",children:a}),e.jsxs("div",{className:"relative",children:[e.jsx(je,{type:"text",placeholder:o,value:s,onChange:d=>t(d.target.value),className:j("h-12 border-border bg-muted/30 px-5 rounded-2xl text-sm font-semibold transition-all focus:bg-background focus:ring-4 focus:ring-primary/5",i==="valid"&&"border-emerald-500/50 bg-emerald-500/5 focus:ring-emerald-500/5",i==="invalid"&&"border-destructive/50 bg-destructive/5 focus:ring-destructive/5")}),e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center",children:[c&&e.jsx(I,{className:"animate-spin text-primary h-4 w-4"}),i==="valid"&&!c&&e.jsx(Z,{className:"text-emerald-500 h-4 w-4"}),i==="invalid"&&!c&&e.jsx(X,{className:"text-destructive h-4 w-4"})]})]})]});export{qe as default};
