import{q as j,r as a,j as e,L as N,d as v}from"./index-CXgGZjIO.js";import{B as g,a as w,b as y,c as k,d as C}from"./index-Soc6UlNG.js";import{bI as u}from"./MetricCard-h760trWe.js";import{g as f,C as S,a as L}from"./index-DqfO0g9Q.js";import{a as P,b as A}from"./students-CtNevgmy.js";function E(s){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(s)}function D(s){return j({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(s)}const I=()=>e.jsxs("tr",{className:"border-b border-slate-50 last:border-0",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-3 w-20 bg-slate-100 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 w-48 bg-slate-100 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-6 w-16 bg-slate-50 rounded-full animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 w-32 bg-slate-50 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 w-24 bg-slate-50 rounded animate-pulse"})}),e.jsx("td",{className:"px-6 py-5 text-right",children:e.jsx("div",{className:"inline-flex h-8 w-8 bg-slate-50 rounded animate-pulse"})})]}),_=({query:s,onViewDetails:h})=>{const[n,c]=a.useState([]),[r,p]=a.useState(!0),[i,x]=a.useState(1),[o,l]=a.useState(1),m=a.useCallback(async(t=1)=>{p(!0);try{const d=await P(s,t);c(d.data),x(d.current_page),l(d.last_page)}catch{c([])}finally{setTimeout(()=>p(!1),300)}},[s]),b=t=>{const d={...t,id:t.id,fullName:f(t),idNumber:t.id_number};h(d)};return a.useEffect(()=>{const t=setTimeout(()=>m(1),500);return()=>clearTimeout(t)},[s,m]),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm relative",children:[r&&n.length>0&&e.jsx("div",{className:"absolute inset-0 z-20 bg-white/40 backdrop-blur-[1px] flex justify-center items-start pt-32",children:e.jsx(N,{className:"w-8 h-8 text-indigo-500 animate-spin"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-h-[580px]",children:e.jsxs("table",{className:"w-full text-left border-separate border-spacing-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/50",children:[e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold uppercase tracking-widest text-slate-500 border-b border-slate-100",children:"ID Number"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold uppercase tracking-widest text-slate-500 border-b border-slate-100",children:"Student Name"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold uppercase tracking-widest text-slate-500 border-b border-slate-100",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold uppercase tracking-widest text-slate-500 border-b border-slate-100",children:"Course"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold uppercase tracking-widest text-slate-500 border-b border-slate-100",children:"Enrolled"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold uppercase tracking-widest text-slate-500 border-b border-slate-100 text-right",children:"Details"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:r&&n.length===0?[...Array(10)].map((t,d)=>e.jsx(I,{},d)):n.length>0?n.map(t=>e.jsxs("tr",{className:"group hover:bg-slate-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-mono text-[11px] font-bold text-indigo-600 uppercase tracking-tight",children:t.id_number}),e.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-slate-800 tracking-tight",children:f(t)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:`inline-flex items-center px-2 py-0.5 rounded-md text-[10px] font-bold uppercase border ${t.has_card?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-amber-50 text-amber-700 border-amber-100"}`,children:[e.jsx("span",{className:`w-1 h-1 rounded-full mr-1.5 ${t.has_card?"bg-emerald-500":"bg-amber-500"}`}),t.has_card?"Issued":"Pending"]})}),e.jsx("td",{className:"px-6 py-4 text-xs font-medium text-slate-500 truncate max-w-[150px]",children:t.course}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-600",children:t.formatted_date}),e.jsx("span",{className:"text-[10px] text-slate-400 uppercase font-medium",children:t.formatted_time})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>b(t),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all active:scale-90",children:e.jsx(S,{size:20})})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-40 text-center text-slate-400 text-sm font-medium",children:"No records matching your search query."})})})]})})})]}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-white border border-slate-200 rounded-xl shadow-sm",children:[e.jsxs("p",{className:"text-xs font-medium text-slate-500",children:["Viewing page ",e.jsx("span",{className:"text-slate-900 font-bold",children:i})," of ",e.jsx("span",{className:"text-slate-400",children:o})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{disabled:i===1||r,onClick:()=>m(i-1),className:"flex items-center gap-2 px-3 py-1.5 text-xs font-bold text-slate-600 border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-30 transition-all",children:[e.jsx(L,{size:16})," Previous"]}),e.jsxs("button",{disabled:i===o||r,onClick:()=>m(i+1),className:"flex items-center gap-2 px-3 py-1.5 text-xs font-bold text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-30 transition-all shadow-sm shadow-indigo-200",children:["Next ",e.jsx(v,{size:16})]})]})]})]})},R=({data:s,onClose:h})=>{const[n,c]=a.useState(!0),[r,p]=a.useState(!1),[i,x]=a.useState(!0),[o,l]=a.useState(!1),m=()=>c(!1),b=()=>{c(!1),p(!0)},t=()=>x(!1),d=()=>{x(!1),l(!0)};return e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-[3rem] shadow-2xl w-full max-w-4xl max-h-[85vh] overflow-hidden flex flex-col border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-center p-8 bg-slate-50/50 dark:bg-slate-800/30 border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"h-14 w-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg shadow-indigo-500/50",children:e.jsx(g,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight leading-none mb-1",children:s.fullName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-500 bg-indigo-50 dark:bg-indigo-900/40 px-2 py-0.5 rounded-md",children:s.idNumber}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400",children:s.course})]})]})]}),e.jsx("button",{onClick:h,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-xl transition-all",children:e.jsx(w,{size:32,className:"text-slate-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-400 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Full Name"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:s.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"ID Number"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:s.idNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Course"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:s.course})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Address"}),e.jsx("p",{className:"text-base text-slate-700 dark:text-slate-300",children:s.address})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-400 mb-4",children:"Emergency Contact"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Guardian Name"}),e.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-white",children:s.guardian_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Contact Number"}),e.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-white",children:s.guardian_contact})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-400 mb-4",children:"Documents"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block",children:"ID Photo"}),e.jsxs("div",{className:"relative w-full aspect-[3/4] bg-slate-100 dark:bg-slate-800 rounded-2xl overflow-hidden border-2 border-slate-200 dark:border-slate-700",children:[n&&!r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}),r?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(g,{size:48,className:"mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"No photo available"})]}):s.photo&&e.jsx("img",{src:s.photo,alt:`${s.fullName}'s photo`,className:`w-full h-full object-cover transition-opacity duration-300 ${n?"opacity-0":"opacity-100"}`,onLoad:m,onError:b})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block",children:"Signature"}),e.jsxs("div",{className:"relative w-full h-32 bg-slate-100 dark:bg-slate-800 rounded-2xl overflow-hidden border-2 border-slate-200 dark:border-slate-700",children:[i&&!o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}),o?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-400",children:e.jsx("p",{className:"text-sm font-medium",children:"No signature available"})}):s.signature&&e.jsx("img",{src:s.signature,alt:`${s.fullName}'s signature`,className:`w-full h-full object-contain transition-opacity duration-300 ${i?"opacity-0":"opacity-100"}`,onLoad:t,onError:d})]})]})]})]})})]})})},M=()=>{const[s,h]=a.useState({total:0,pending:0,issued:0}),[n,c]=a.useState(""),[r,p]=a.useState(!1),[i,x]=a.useState(null),o=a.useCallback(async()=>{try{const l=await A();h({total:l.applicantsReport||0,pending:l.pendingCount||0,issued:l.issuedCount||0})}catch(l){console.error(l)}},[]);return a.useEffect(()=>{o()},[o]),e.jsxs("div",{className:"min-h-screen bg-slate-50/50 p-5 lg:p-8 font-sans selection:bg-indigo-100",children:[e.jsxs("div",{className:"mx-auto max-w-[1400px] space-y-6",children:[e.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-end gap-6 border-b border-slate-200 pb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-sans font-[600] text-slate-800 tracking-tight",children:["Applicants ",e.jsx("span",{className:"text-indigo-600 font-medium",children:"Registry"})]}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Review, verify, and issue identification cards."})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-72 group",children:[e.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Find applicant...",value:n,onChange:l=>c(l.target.value),className:"w-full rounded-xl border border-slate-200 bg-white pl-10 pr-4 py-2.5 text-sm shadow-sm focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all"})]}),e.jsxs("button",{onClick:()=>p(!r),className:`flex items-center gap-2 px-5 py-2.5 rounded-xl border text-sm font-semibold transition-all ${r?"bg-slate-900 text-white border-slate-900 shadow-lg":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"}`,children:[e.jsx(E,{size:16})," Filters"]})]})]}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(u,{icon:y,title:"Total Applicants",value:s.total.toLocaleString(),color:"bg-blue-600"}),e.jsx(u,{icon:k,title:"Pending Review",value:s.pending.toLocaleString(),color:"bg-amber-500"}),e.jsx(u,{icon:C,title:"Issued Cards",value:s.issued.toLocaleString(),color:"bg-indigo-600"})]}),r&&e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 shadow-sm grid grid-cols-2 md:grid-cols-4 gap-6 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),e.jsx("select",{className:"w-full border-slate-200 rounded-lg text-xs font-semibold py-2.5 px-3 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none",children:e.jsx("option",{children:"All Departments"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Issuance Status"}),e.jsxs("select",{className:"w-full border-slate-200 rounded-lg text-xs font-semibold py-2.5 px-3 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none",children:[e.jsx("option",{children:"All Records"}),e.jsx("option",{children:"Issued"}),e.jsx("option",{children:"Pending"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-slate-400",children:"History Log"})}),e.jsx("div",{className:"bg-white border border-slate-200 rounded-[2rem] overflow-hidden shadow-sm",children:e.jsx(_,{query:n,onViewDetails:l=>x(l)})})]})]}),i&&e.jsx(R,{data:i,onClose:()=>x(null)})]})};export{M as default};
